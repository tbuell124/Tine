# Repository Guidelines

## Project Structure & Module Organization
Source code lives in `src/`, with Skia UI under `src/components/`, DSP bindings in `src/native/`, shared state in `src/state/`, and hooks/utilities in the matching directories. Assets such as icons and audio clips sit in `assets/`, while `android/` and `ios/` host the native shells generated by Expo. Keep documentation updates in `docs/` (see `docs/native-audio-integration.md` for generated pitch pipeline notes), mocks in `__mocks__/`, and treat `App.tsx` as the single entry point that wires up providers and navigation.

## Build, Test, and Development Commands
`npm run start` launches Metro via Expo and is the default for local development; add `--clear` if Metro caches misbehave. Use `npm run ios` or `npm run android` to build and install the native shells on simulators/emulators, and `npm run web` for a browser preview. Release builds use `npm run build:ios` and `npm run build:android`, which select the Release configurations. Lint, formatting, and unit tests run through `npm run lint`, `npm run format:check`, and `npm test`.

## Coding Style & Naming Conventions
The project targets modern TypeScript with ESLint’s `universe/native` presets and Prettier enforcing 2-space indents, single quotes, trailing commas, and `printWidth` 100. Components, hooks, and contexts use PascalCase filenames (`TunerFace.tsx`), utilities and state updaters use lower camelCase (`pitchMath.ts`), and test doubles reside beside code in `__tests__/`. Prefer absolute imports via the configured aliases (`@components/Spinner`, `@native/modules/...`) instead of long relative paths. Run `npm run lint` before committing; `npm run lint:fix` and `npm run format` can auto-resolve violations.

## Testing Guidelines
Jest with the `jest-expo` preset powers unit and component tests, with React Native Testing Library helpers loaded from `jest.setup.ts`. Keep tests under `src/**/__tests__` using the `*.test.tsx` or `*.test.ts` naming pattern, and favor behavioral assertions over implementation checks. `collectCoverageFrom` targets all `src` TypeScript files, so maintain coverage when adding features; use `npm test -- --watch` to iterate locally.

## Commit & Pull Request Guidelines
Recent history favors concise Conventional Commit prefixes (`chore:`, `fix:`, `feat:`) followed by imperative summaries ≤72 characters, so match that style and group related changes per commit. Reference issue numbers in the footer when applicable, and avoid bundling unrelated refactors. Pull requests should describe intent, list manual or automated test results, and attach screenshots or screen recordings when UI shifts. Mention configuration changes (e.g., updates to `app.json` or native build scripts) so reviewers can verify platform impacts.
